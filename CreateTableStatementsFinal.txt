CREATE TABLE `DEPARTMENT` (
  `DEPTKEY` char(4) NOT NULL,
  `DEPTNAME` varchar(20) DEFAULT NULL,
  PRIMARY KEY (`DEPTKEY`));


CREATE TABLE `PROFESSOR` (
  `PROFID` int(7) NOT NULL auto_increment,
  `PROFNAME` varchar(60) DEFAULT NULL,
  `FNAME` varchar(30) DEFAULT NULL,
  `LNAME` varchar(30) DEFAULT NULL,
  `DEPTKEY` char(4) DEFAULT NULL,
  PRIMARY KEY (`PROFID`),
  UNIQUE KEY `PROFID_UNIQUE` (`PROFID`),
  UNIQUE KEY `PROFNAME` (`PROFNAME`),
  KEY `DEPTKEY` (`DEPTKEY`),
  CONSTRAINT `professor_ibfk_1` FOREIGN KEY (`DEPTKEY`) REFERENCES `department` (`DEPTKEY`) ON DELETE CASCADE);

ALTER TABLE professor AUTO_INCREMENT=2000000; 

CREATE TABLE `STUDENT` (
  `STUDID` int(7) NOT NULL auto_increment,
  `FNAME` varchar(30) DEFAULT NULL,
  `LNAME` varchar(30) DEFAULT NULL,
  `MAJOR` char(4) DEFAULT NULL,
  PRIMARY KEY (`STUDID`));

ALTER TABLE student AUTO_INCREMENT=1000000;
 
CREATE TABLE `SCHOOLADMIN` (
  `SCHADID` int(7) NOT NULL auto_increment,
  `FNAME` varchar(30) DEFAULT NULL,
  `LNAME` varchar(30) DEFAULT NULL,
  `DEPTKEY` char(4) DEFAULT NULL,
  PRIMARY KEY (`SCHADID`),
  UNIQUE KEY `SCHADID_UNIQUE` (`SCHADID`),
  FOREIGN KEY (`DEPTKEY`) REFERENCES `department` (`DEPTKEY`) on delete cascade);

ALTER TABLE schooladmin auto_increment =3000000;

CREATE TABLE `DATABASEADMIN` (
  `DBADMINID` int(7) NOT NULL auto_increment,
  `PASS`  varchar(10) NOT NULL,
  `DBAPASS` varchar(30) NOT NULL,
  `FNAME` varchar(30) DEFAULT NULL,
  `LNAME` varchar(30) DEFAULT NULL,
  PRIMARY KEY (`DBADMINID`));
  
ALTER TABLE DATABASEADMIN AUTO_INCREMENT=4000000;

 CREATE TABLE `COURSE` (
  `CRN` SMALLINT(5) NOT NULL auto_increment,
  `DEPTKEY` char(4) DEFAULT NULL,
  `COURSENUM` char(4) NOT NULL DEFAULT 'U000',
  `SECTIONNUM` char(2) DEFAULT NULL,
  `PROFID` int(7) DEFAULT NULL,
  `PROFNAME` varchar(60) DEFAULT NULL,
  `DES` varchar(120) DEFAULT NULL,
  `SEMESTER` char(2) DEFAULT NULL,
  `YEAR` SMALLINT NOT NULL,
  PRIMARY KEY (`CRN`),
  KEY `DEPTKEY` (`DEPTKEY`),
  KEY `PROFID` (`PROFID`),
  KEY `PROFNAME` (`PROFNAME`),
  FOREIGN KEY (`DEPTKEY`) REFERENCES `department` (`DEPTKEY`),
  FOREIGN KEY (`PROFID`) REFERENCES `professor` (`PROFID`),
  FOREIGN KEY (`PROFNAME`) REFERENCES `professor` (`PROFNAME`) ,
  CHECK (((`SEMESTER` = 'FA') or (`SEMESTER` = 'SP'))),
  CHECK (((`YEAR` >= 2000) and (`YEAR` <= 3000))));


alter TABLE COURSE auto_increment = 10000;

CREATE TABLE `registeredfor` (
  `STUDID` int NOT NULL,
  `CRN` tinyint NOT NULL,
  `GRADE` int DEFAULT NULL,
  PRIMARY KEY (`STUDID`,`CRN`),
  KEY `CRN` (`CRN`),
  FOREIGN KEY (`STUDID`) REFERENCES `student` (`STUDID`),
  FOREIGN KEY (`CRN`) REFERENCES `COURSE` (`CRN`));




CREATE TABLE `STUDENTRECORD` (
  `RECORDID` int(8) NOT NULL auto_increment,
  `STUDID` int(7) DEFAULT NULL,
  `DEPTKEY` char(4) DEFAULT NULL,
  `CRN` SMALLINT(5) DEFAULT NULL,
  `GRADE`  TINYINT(3) DEFAULT NULL,
  `LETTERGRADE` varchar(1) NOT NULL DEFAULT '-',
  `SEMESTER` char(2) DEFAULT NULL,
  `YEAR` SMALLINT NOT NULL,
  PRIMARY KEY (`RECORDID`),
  KEY `STUDID` (`STUDID`),
  KEY `DEPTKEY` (`DEPTKEY`),
  KEY `CRN` (`CRN`),
  CHECK (((`LETTERGRADE` = '-') or (`LETTERGRADE` = 'A') or (`LETTERGRADE` = 'B') or (`LETTERGRADE` = 'C') or (`LETTERGRADE` = 'D') or (`LETTERGRADE` = 'F'))),
  CHECK (((`SEMESTER` = 'FA') or (`SEMESTER` = 'SP'))),
  CHECK (((`YEAR` >= 2000) and (`YEAR` <= 3000))));
ALTER TABLE STUDENTRECORD auto_increment 10000000;

CREATE TABLE `WORKSFOR` (
  `SCHADID` int(7) NOT NULL,
  `DEPTKEY` char(4) NOT NULL,
  PRIMARY KEY (`SCHADID`,`DEPTKEY`),
  KEY `DEPTKEY` (`DEPTKEY`),
  FOREIGN KEY (`SCHADID`) REFERENCES `schooladmin` (`SCHADID`),
  FOREIGN KEY (`DEPTKEY`) REFERENCES `department` (`DEPTKEY`));

CREATE TABLE USERS(
`USERID` INT(7) NOT NULL,
`Password` varchar(30) not null,
`Role` varchar(30),
Primary Key(`UserID`,`Password`),
CHECK((`Role` ='Student') OR (`Role`='Professor') OR (`Role`='SchoolAdmin'))); 

