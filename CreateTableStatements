
CREATE TABLE STUDENT (
  STUDID NUMERIC(7) PRIMARY KEY,
  FNAME VARCHAR2(30),
  LNAME VARCHAR2(30),
  MAJOR CHAR(4)
);

CREATE TABLE DEPARTMENT (
  DEPTKEY CHAR(4) PRIMARY KEY
  DEPTNAME VARCHAR2(20)
);

CREATE TABLE PROFESSOR (
  PROFID NUMERIC(7) PRIMARY KEY,
  PROFNAME VARCHAR2(60),
  FNAME VARCHAR2(30),
  LNAME VARCHAR2(30),
  DEPTKEY CHAR(4),
  FOREIGN KEY (DEPTKEY) REFERENCES DEPARTMENT(DEPTKEY)
);

CREATE TABLE SCHOOLADMIN (
  SCHADID NUMERIC(7) PRIMARY KEY,
  FNAME VARCHAR2(30),
  LNAME VARCHAR2(30),
  DEPTKEY CHAR(4),
  FOREIGN KEY (DEPTKEY) REFERENCES DEPARTMENT(DEPTKEY)
);

CREATE TABLE COURSE (
  CRN NUMBER(5) PRIMARY KEY
  DEPTKEY CHAR(4),
  COURSENUM CHAR(4) NOT NULL DEFAULT 'U000',
  SECTIONNUM CHAR(2),
  PROFID NUMERIC(7),
  PROFNAME VARCHAR2(60),
  DESC VARCHAR2(120),
  SEMESTER CHAR(2) (CHECK SEMESTER = "FALL" OR SEMESTER = "SPRING"),
  YEAR INT NOT NULL (CHECK YEAR >= 2000 AND YEAR <= 3000),
  FOREIGN KEY (DEPTKEY) REFERENCES DEPARTMENT(DEPTKEY),
  FOREIGN KEY (PROFID) REFERENCES PROFESSOR(PROFID),
  FOREIGN KEY (PROFNAME) REFERENCES PROFESSOR(PROFNAME)
);

CREATE TABLE REGISTEREDFOR (
  STUDID NUMBER(7),
  CRN NUMERIC(5),
  GRADE NUMBER(3),
  PRIMARY KEY (STUDID, CRN),
  FOREIGN KEY (STUDID) REFERENCES STUDENT(STUDID),
  FOREIGN KEY (CRN) REFERENCES COURSE(CRN)
);

CREATE TABLE STUDENTRECORD (
  RECORDID NUMBER(8) PRIMARY KEY,
  STUDID NUMERIC(7),
  COURSENUM CHAR(4) NOT NULL DEFAULT 'U000',
  GRADE NUMERIC(3) DEFAULT NULL,
  LETTERGRADE VARCHAR(1) NOT NULL DEFAULT '-' (CHECK LETTERGRADE = "-" OR LETTERGRADE = "A" OR LETTERGRADE = "B" OR LETTERGRADE = "C" OR LETTERGRADE = "D" OR LETTERGRADE = "F"),
  SEMESTER CHAR(2) (CHECK SEMESTER = "FALL" OR SEMESTER = "SPRING"),
  YEAR INT NOT NULL (CHECK YEAR >= 2000 AND YEAR <= 3000),
  FOREIGN KEY (STUDID) REFERENCES STUDENT(STUDID),
  FOREIGN KEY (COURSENUM) REFERENCES COURSE(COURSENUM),
  FOREIGN KEY (GRADE) REFERENCES REGISTEREDFOR(GRADE),
  FOREIGN KEY (SEMESTER) REFERENCES COURSE(SEMESTER),
  FOREIGN KEY (YEAR) REFERENCES COURSE(YEAR)
);

CREATE TABLE DATABASEADMIN (
  DBADMINID VARCHAR(10) PRIMARY KEY,
  FNAME VARCHAR2(30),
  LNAME VARCHAR2(30)
);

CREATE TABLE WORKSFOR (
  SCHADID NUMERIC(7),
  DEPTKEY CHAR(4),
  PRIMARY KEY (SCHADID, DEPTKEY),
  FOREIGN KEY (SCHADID) REFERENCES SCHOOLADMIN(SCHADID),
  FOREIGN KEY (DEPTKEY) REFERENCES DEPARTMENT(DEPTKEY)
);
