
CREATE TABLE STUDENT (
  STUDID NUMERIC(7) PRIMARY KEY,
  FNAME VARCHAR2(30),
  LNAME VARCHAR2(30),
  MAJOR CHAR(4)
);

CREATE TABLE DEPARTMENT (
  DEPTKEY CHAR(4) PRIMARY KEY
  DEPTNAME VARCHAR2(20)
);

CREATE TABLE PROFESSOR (
  PROFID NUMERIC(7) PRIMARY KEY,
  PROFNAME VARCHAR2(60) UNIQUE,
  FNAME VARCHAR2(30),
  LNAME VARCHAR2(30),
  DEPTKEY CHAR(4),
  FOREIGN KEY (DEPTKEY) REFERENCES DEPARTMENT(DEPTKEY)
);

CREATE TABLE SCHOOLADMIN (
  SCHADID NUMERIC(7) PRIMARY KEY,
  FNAME VARCHAR2(30),
  LNAME VARCHAR2(30),
  DEPTKEY CHAR(4),
  FOREIGN KEY (DEPTKEY) REFERENCES DEPARTMENT(DEPTKEY)
);

CREATE TABLE DATABASEADMIN (
  DBADMINID VARCHAR(10) PRIMARY KEY,
  FNAME VARCHAR2(30),
  LNAME VARCHAR2(30)
);

CREATE TABLE  COURSE(
  CRN NUMBER(5) PRIMARY KEY,
  DEPTKEY CHAR(4),
  COURSENUM CHAR(4) DEFAULT 'U000' NOT NULL,
  SECTIONNUM CHAR(2),
  PROFID NUMBER(7),
  PROFNAME VARCHAR2(60),
  DES VARCHAR2(120),
  SEMESTER CHAR(2),
  YEAR NUMBER NOT NULL,
  FOREIGN KEY (DEPTKEY) REFERENCES DEPARTMENT(DEPTKEY),
  FOREIGN KEY (PROFID) REFERENCES PROFESSOR(PROFID),
  FOREIGN KEY (PROFNAME) REFERENCES PROFESSOR(PROFNAME),
  CHECK ( SEMESTER = 'FA' OR SEMESTER = 'SP'),
  CHECK( YEAR >= 2000 AND YEAR <= 3000)
);

CREATE TABLE REGISTEREDFOR (
  STUDID NUMBER(7),
  CRN NUMBER(5),
  GRADE NUMBER(3) DEFAULT NULL,
  FOREIGN KEY (STUDID) REFERENCES STUDENT(STUDID),
  FOREIGN KEY (CRN) REFERENCES COURSE(CRN),--Course number is NOT UNIQUE (multiple sections to a single course) Dropped this for just crn.
  PRIMARY KEY (STUDID, CRN)
);


CREATE TABLE WORKSFOR (
  SCHADID NUMERIC(7),
  DEPTKEY CHAR(4),
  PRIMARY KEY (SCHADID, DEPTKEY),
  FOREIGN KEY (SCHADID) REFERENCES SCHOOLADMIN(SCHADID),
  FOREIGN KEY (DEPTKEY) REFERENCES DEPARTMENT(DEPTKEY)
);

CREATE TABLE STUDENTRECORD (
  RECORDID NUMBER(8) PRIMARY KEY,
  STUDID NUMERIC(7),
  DEPTKEY CHAR(4),
  CRN NUMBER(5),
  GRADE NUMERIC(3) DEFAULT NULL,
  LETTERGRADE VARCHAR(1) DEFAULT '-' NOT NULL,
  SEMESTER CHAR(2),
  YEAR NUMBER NOT NULL,
  FOREIGN KEY (STUDID) REFERENCES STUDENT(STUDID),
  FOREIGN KEY (DEPTKEY) REFERENCES DEPARTMENT(DEPTKEY),
  FOREIGN KEY (CRN) REFERENCES COURSE(CRN),
  CHECK(LETTERGRADE = '-' OR LETTERGRADE = 'A' OR LETTERGRADE = 'B' OR LETTERGRADE = 'C' OR LETTERGRADE = 'D' OR LETTERGRADE = 'F'),
  CHECK( SEMESTER = 'FA' OR SEMESTER = 'SP'),
  CHECK( YEAR >= 2000 AND YEAR <= 3000)
);
